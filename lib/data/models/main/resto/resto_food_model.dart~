class RestoPlaceModel {
  final int id;
  final int foodId;
  final String shopName;
  final String address;
  final String phone;
  final String openHours;
  final String closeHours;
  final String priceRange;
  final double latitude;
  final double longitude;
  final String createdAt;
  final String foodName;
  final FoodInfo? food;
  final List<ImageInfo> images;

  RestoPlaceModel({
    required this.id,
    required this.foodId,
    required this.shopName,
    required this.address,
    required this.phone,
    required this.openHours,
    required this.closeHours,
    required this.priceRange,
    required this.latitude,
    required this.longitude,
    required this.createdAt,
    required this.foodName,
    this.food,
    required this.images,
  });

  factory RestoPlaceModel.fromJson(Map<String, dynamic> json) {
    return RestoPlaceModel(
      id: json['id'] as int,
      foodId: json['food_id'] as int,
      shopName: json['shop_name'] as String? ?? '',
      address: json['address'] as String? ?? '',
      phone: json['phone'] as String? ?? '',
      openHours: json['open_hours'] as String? ?? '',
      closeHours: json['close_hours'] as String? ?? '',
      priceRange: json['price_range'] as String? ?? '',
      // Pastikan konversi ke double aman
      latitude: (json['latitude'] as num?)?.toDouble() ?? 0.0,
      longitude: (json['longitude'] as num?)?.toDouble() ?? 0.0,
      createdAt: json['created_at'] as String? ?? '',
      foodName: json['food_name'] as String? ?? '',

      // âœ… Perbaikan: Kirim map 'food' ke FoodInfo.fromJson
      food: json['food'] != null
          ? FoodInfo.fromJson(json['food'] as Map<String, dynamic>)
          : null,

      // âœ… Sudah Benar: Menggunakan List<ImageInfo>
      images: (json['images'] as List<dynamic>?)
          ?.map((e) => ImageInfo.fromJson(e as Map<String, dynamic>))
          .toList() ??
          [],
    );
  }
}




// ------------------------------------------------------------------

class FoodInfo {
  final String foodName;

  FoodInfo({required this.foodName});

  factory FoodInfo.fromJson(Map<String, dynamic> json) {
    // ðŸ”¥ PERBAIKAN: Key 'food' sudah dihilangkan karena kita hanya mengirim
    //               map internalnya ({"food_name": "Bakso Malang"})
    return FoodInfo(
      foodName: json['food_name'] as String? ?? '',
    );
  }
}

// ------------------------------------------------------------------

class ImageInfo {
  final String imageUrl;
  final int idFoodPlace; // Dibuat non-nullable karena selalu ada di response
  final int idImagePlace; // Dibuat non-nullable karena ini PK

  ImageInfo({
    required this.imageUrl,
    required this.idFoodPlace,
    required this.idImagePlace,
  });

  factory ImageInfo.fromJson(Map<String, dynamic> json) {
    return ImageInfo(
      imageUrl: json['image_url'] as String? ?? '',
      // Konversi ke int dan sediakan nilai default 0 jika null
      idFoodPlace: json['id_food_place'] as int? ?? 0,
      idImagePlace: json['id_image_place'] as int? ?? 0,
    );
  }
}